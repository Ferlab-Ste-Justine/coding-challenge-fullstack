{"ast":null,"code":"import _classCallCheck from \"/home/xpack/Desktop/chu-assignment/client/clientapp/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/xpack/Desktop/chu-assignment/client/clientapp/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/xpack/Desktop/chu-assignment/client/clientapp/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/xpack/Desktop/chu-assignment/client/clientapp/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/xpack/Desktop/chu-assignment/client/clientapp/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/xpack/Desktop/chu-assignment/client/clientapp/src/components/Login.js\";\nimport * as React from 'react';\nimport { Formik, Field, ErrorMessage } from 'formik';\nimport { Container, Form, Button } from 'react-bootstrap';\nimport * as Yup from 'yup';\nimport { Link, Redirect } from 'react-router-dom';\nimport Axios from 'axios';\n\nvar Login =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Login, _React$Component);\n\n  function Login() {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this));\n\n    _this.validateSchema = function () {\n      return Yup.object().shape({\n        username: Yup.string().required('required'),\n        password: Yup.string().min(6, \"password needs to be at least 6 charachters\").required('required')\n      });\n    };\n\n    _this.handleSubmit = function (_ref) {\n      var errors = _ref.errors,\n          values = _ref.values;\n\n      if (Object.keys(errors).length > 0) {\n        alert(\"please fix the form issues\");\n      } else {\n        Axios.post(\"/admin/login\", {\n          user: {\n            username: values.username,\n            password: values.password\n          }\n        }).then(function (response) {\n          var res = response.data;\n\n          if (response.status === 200) {\n            // request was succesful\n            localStorage.setItem(\"username\", res.username);\n            localStorage.setItem(\"email\", res.userEmail);\n            localStorage.setItem(\"token\", response.token);\n\n            _this.setState({\n              redirect: true\n            });\n          }\n        }).catch(function (error) {\n          console.log(\"an error occured\");\n        });\n      }\n    };\n\n    _this.state = {\n      username: \"\",\n      password: \"\",\n      redirect: false\n    };\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, !this.state.redirect ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(Formik, {\n        initialValues: this.state,\n        validationSchema: this.validateSchema(),\n        onSubmit: function onSubmit(values, actions) {\n          setTimeout(function () {\n            alert(JSON.stringify(values, null, 2));\n            actions.setSubmitting(false);\n          }, 1000);\n        },\n        render: function render(values) {\n          return React.createElement(Container, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 74\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"form-register__holder\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 75\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"title\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 76\n            },\n            __self: this\n          }, React.createElement(\"h2\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 76\n            },\n            __self: this\n          }, \"Login\")), React.createElement(Form, {\n            onSubmit: function onSubmit(e) {\n              e.preventDefault();\n\n              _this2.handleSubmit(values);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 77\n            },\n            __self: this\n          }, React.createElement(Form.Group, {\n            controlId: \"formBasicEmail\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 81\n            },\n            __self: this\n          }, React.createElement(Form.Label, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 82\n            },\n            __self: this\n          }, \"username\"), React.createElement(Field, {\n            name: \"username\",\n            render: function render(_ref2) {\n              var field = _ref2.field;\n              return React.createElement(Form.Control, Object.assign({}, field, {\n                type: \"text\",\n                placeholder: \"username\",\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 86\n                },\n                __self: this\n              }));\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 83\n            },\n            __self: this\n          }), React.createElement(ErrorMessage, {\n            name: \"username\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 89\n            },\n            __self: this\n          }, function (message) {\n            return React.createElement(\"div\", {\n              style: {\n                color: \"red\"\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 91\n              },\n              __self: this\n            }, message);\n          })), React.createElement(Form.Group, {\n            controlId: \"formBasicEmail\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 97\n            },\n            __self: this\n          }, React.createElement(Form.Label, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 98\n            },\n            __self: this\n          }, \"password\"), React.createElement(Field, {\n            name: \"password\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 99\n            },\n            __self: this\n          }, function (_ref3) {\n            var field = _ref3.field;\n            return React.createElement(Form.Control, Object.assign({}, field, {\n              type: \"password\",\n              placeholder: \"password\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 101\n              },\n              __self: this\n            }));\n          }), React.createElement(ErrorMessage, {\n            name: \"password\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 104\n            },\n            __self: this\n          }, function (message) {\n            return React.createElement(\"div\", {\n              style: {\n                color: \"red\"\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 106\n              },\n              __self: this\n            }, message);\n          })), React.createElement(Button, {\n            variant: \"primary\",\n            type: \"submit\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 111\n            },\n            __self: this\n          }, \"Login\"), React.createElement(Link, {\n            to: \"/register\",\n            style: {\n              marginLeft: \"10px\"\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 114\n            },\n            __self: this\n          }, \"new member?\"))));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      })) : React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Login;\n}(React.Component);\n\nexport default Login;","map":{"version":3,"sources":["/home/xpack/Desktop/chu-assignment/client/clientapp/src/components/Login.js"],"names":["React","Formik","Field","ErrorMessage","Container","Form","Button","Yup","Link","Redirect","Axios","Login","validateSchema","object","shape","username","string","required","password","min","handleSubmit","errors","values","Object","keys","length","alert","post","user","then","response","res","data","status","localStorage","setItem","userEmail","token","setState","redirect","catch","error","console","log","state","actions","setTimeout","JSON","stringify","setSubmitting","e","preventDefault","field","message","color","marginLeft","Component"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { Formik, Field,ErrorMessage } from 'formik';\nimport {Container ,Form,Button} from 'react-bootstrap';\nimport * as Yup from 'yup';\nimport {Link,Redirect} from 'react-router-dom';\nimport Axios from 'axios';\n\nclass Login extends React.Component{\n    constructor(){\n        super ();\n        this.state={\n            username:\"\",\n            password:\"\",\n            redirect:false\n        }   \n    \n    }\n\n    validateSchema=()=>{\n        return  Yup.object().shape({\n            username:Yup\n                    .string()\n                    .required('required'),\n            password:Yup \n                    .string()\n                    .min(6,\"password needs to be at least 6 charachters\")\n                    .required('required')   \n        });\n    }\n\n    handleSubmit=({errors,values})=>{\n        if(Object.keys(errors).length>0){\n            alert(\"please fix the form issues\");\n        }else{\n            Axios\n                .post(\"/admin/login\",{\n                    user:{\n                        username:values.username,\n                        password:values.password\n                    }\n                })\n                .then(response=>{\n                    const res= response.data;\n                    if(response.status===200){\n                        // request was succesful\n                        localStorage.setItem(\"username\",res.username);\n                        localStorage.setItem(\"email\",res.userEmail);\n                        localStorage.setItem(\"token\",response.token);\n                        this.setState({redirect:true});\n                    }\n                })\n                .catch(error=>{\n                    console.log(\"an error occured\");\n                })\n        }\n    }\n\n    render(){\n        return (\n            <React.Fragment>\n            {!this.state.redirect?\n            \n            <div>\n                 <Formik\n                initialValues={this.state}\n                validationSchema={this.validateSchema()}\n                onSubmit={(values, actions) => {\n                    setTimeout(() => {\n                    alert(JSON.stringify(values, null, 2));\n                    actions.setSubmitting(false);\n                    }, 1000);\n                }}\n                render={values => (\n                    <Container>\n                    <div className=\"form-register__holder\">\n                    <div className=\"title\"><h2>Login</h2></div>\n                    <Form onSubmit={(e)=>{\n                        e.preventDefault();\n                        this.handleSubmit(values);\n                    }}>\n                    <Form.Group controlId=\"formBasicEmail\">\n                      <Form.Label>username</Form.Label>\n                      <Field\n                        name=\"username\"\n                        render={({field}) => (\n                        <Form.Control {...field} type=\"text\" placeholder=\"username\" />\n                    )}\n                    />\n                      <ErrorMessage name=\"username\" >\n                      { (message)=>{\n                           return <div style={{color:\"red\"}}>{message}</div>\n                      }}\n                     \n                      </ErrorMessage>\n\n                    </Form.Group>\n                    <Form.Group controlId=\"formBasicEmail\">\n                      <Form.Label>password</Form.Label>\n                      <Field name=\"password\" >\n                        {({field})=>{\n                            return <Form.Control {...field} type=\"password\" placeholder=\"password\" />\n                        }}\n                      </Field>\n                      <ErrorMessage name=\"password\" >\n                      { (message)=>{\n                           return <div style={{color:\"red\"}}>{message}</div>\n                      }}\n                    </ErrorMessage> \n                    </Form.Group>\n\n                    <Button variant=\"primary\" type=\"submit\">\n                      Login\n                    </Button>\n                    <Link to={\"/register\"} style={{marginLeft:\"10px\"}}>new member?</Link>\n                  </Form>\n                  </div>\n                  </Container>\n                )}\n                />\n            </div>\n            :\n            <Redirect to={\"/\"} />\n            }\n            </React.Fragment>\n        );\n       \n    }\n\n\n}\n\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}