{"ast":null,"code":"import _classCallCheck from \"/home/xpack/Desktop/chu-assignment/client/clientapp/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/xpack/Desktop/chu-assignment/client/clientapp/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/xpack/Desktop/chu-assignment/client/clientapp/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/xpack/Desktop/chu-assignment/client/clientapp/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/xpack/Desktop/chu-assignment/client/clientapp/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/xpack/Desktop/chu-assignment/client/clientapp/src/components/HomePage.js\";\nimport * as React from 'react';\nimport { Link } from 'react-router-dom';\nimport './styles/homepage.css';\nimport { Button, Container } from 'react-bootstrap';\nimport websocket from 'socket.io-client';\nimport * as axios from 'axios';\n\nvar HomePage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(HomePage, _React$Component);\n\n  function HomePage() {\n    var _this;\n\n    _classCallCheck(this, HomePage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(HomePage).call(this));\n\n    _this.handlChnage = function (e) {\n      _this.setState({\n        messageContent: e.target.value\n      }); // broadcasting the message the  current user is typing \n\n\n      socket.emit(\"typing\", {\n        username: localStorage.username,\n        message: e.target.value\n      });\n    };\n\n    _this.logout = function () {\n      // clearing all the data in the localstorage\n      localStorage.clear();\n    };\n\n    _this.getPosts = function () {\n      axios.get(\"/post/getAll\").then(function (response) {\n        var posts = response.data.posts;\n\n        _this.setState({\n          posts: posts\n        });\n      }).catch(function (error) {\n        alert(error.message);\n      });\n    };\n\n    _this.displayPost = function (post) {\n      var posts = _this.state.posts;\n      posts.push(post);\n\n      _this.setState({\n        posts: posts\n      });\n    };\n\n    _this.addPost = function (post) {\n      var body = {\n        content: _this.state.messageContent\n      };\n      var instance = axios.create({\n        headers: {\n          post: {\n            token: localStorage.getItem(\"token\")\n          }\n        }\n      });\n      instance.post(\"/post/create\", body).then(function (response) {\n        console.log(\"response is \", response);\n      }).catch(function (error) {\n        alert(error.message);\n      });\n    };\n\n    _this.editMessage = function (messsageId) {\n      console.log(\"edit\");\n    };\n\n    _this.state = {\n      messageContent: \"\",\n      posts: []\n    };\n    return _this;\n  }\n\n  _createClass(HomePage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var socket = websocket(\"http://localhost:8080\");\n      socket.on(\"create\", function (data) {\n        if (data.action === \"create\") {\n          _this2.displayPost(data.post);\n        }\n      });\n      this.getPosts();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        id: \"homepage-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"header\", {\n        className: \"top-bar__menu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"homepage-wall\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, \"The Wall\")), React.createElement(\"div\", {\n        className: \"login-form__container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, !localStorage.username ? React.createElement(Link, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleClick,\n        variant: \"secondary\",\n        className: \"homepage-button__slbtn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"Login/SignUp\")) : React.createElement(Link, {\n        to: \"/\",\n        onClick: this.logout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleClick,\n        variant: \"secondary\",\n        className: \"homepage-button__slbtn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"Logout\")))), React.createElement(\"div\", {\n        className: \"posts-container__wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: \"post-list__item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, this.state.posts.map(function (post) {\n        return React.createElement(\"li\", {\n          className: \"post-item\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"post-item__sender\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }, post.username), React.createElement(\"div\", {\n          className: \"post-item__container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"post-item__content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, post.content), React.createElement(\"div\", {\n          className: \"post-item__options\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }, localStorage.username ? React.createElement(Button, {\n          className: \"edit-post__btn\",\n          variant: \"secondary\",\n          onClick: function onClick(e) {\n            _this3.editMessage(post.id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }, \"edit\") : null)));\n      }))), localStorage.username ? React.createElement(\"div\", {\n        className: \"chat-box__area\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"textarea\", {\n        className: \"mesage-field__input\",\n        value: this.state.messageContent,\n        placeholder: \"enter a message\",\n        onChange: this.handlChnage,\n        draggable: \"false\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"send-message__button\",\n        onClick: this.addPost,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \"send\")) : null));\n    }\n  }]);\n\n  return HomePage;\n}(React.Component);\n\nexport default HomePage;","map":{"version":3,"sources":["/home/xpack/Desktop/chu-assignment/client/clientapp/src/components/HomePage.js"],"names":["React","Link","Button","Container","websocket","axios","HomePage","handlChnage","e","setState","messageContent","target","value","socket","emit","username","localStorage","message","logout","clear","getPosts","get","then","response","posts","data","catch","error","alert","displayPost","post","state","push","addPost","body","content","instance","create","headers","token","getItem","console","log","editMessage","messsageId","on","action","handleClick","map","id","Component"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {Link} from 'react-router-dom';\nimport './styles/homepage.css';\nimport {Button,Container} from 'react-bootstrap';\nimport websocket from 'socket.io-client';\nimport * as axios from 'axios';\n\nclass HomePage extends React.Component{\n\n    constructor(){\n        super();\n        this.state={\n            messageContent:\"\",\n            posts:[]\n        }\n    }\n\n    handlChnage=(e)=>{\n        this.setState({messageContent:e.target.value});\n        // broadcasting the message the  current user is typing \n        socket.emit(\"typing\",{\n            username:localStorage.username,\n            message:e.target.value\n        })\n    }\n    logout=()=>{\n        // clearing all the data in the localstorage\n        localStorage.clear();\n    }\n    componentDidMount(){\n       const socket = websocket(\"http://localhost:8080\");\n        socket.on(\"create\",(data)=>{\n        if(data.action===\"create\"){\n            this.displayPost(data.post);\n        }\n    })\n       this.getPosts();\n    }\n\n    getPosts=()=>{\n       axios\n        .get(\"/post/getAll\")\n        .then(response=>{\n            const posts = response.data.posts;\n            this.setState({\n                posts\n            })\n        })\n        .catch(error=>{\n            alert(error.message);\n        })\n    }\n\n    displayPost=(post)=>{\n        const posts = this.state.posts;\n        posts.push(post);\n        this.setState({\n            posts\n        })\n    }\n\n    addPost=(post)=>{\n        const body = {\n            content:this.state.messageContent\n        }\n         let instance=axios.create({\n            headers: {\n              post: {     \n                token:localStorage.getItem(\"token\")\n              }\n            }\n          });\n\n        instance.post(\"/post/create\",body)\n       .then(response=>{\n         console.log(\"response is \",response);\n       })\n       .catch(error=>{\n           alert(error.message);\n       })\n    }\n\n    editMessage=(messsageId)=>{\n        console.log(\"edit\");\n    }\n\n    render(){\n        return (\n            <div id=\"homepage-wrapper\">\n            <Container>\n            <header className=\"top-bar__menu\">\n                    \n                    <div className=\"homepage-wall\">\n                        <h3>The Wall</h3>\n                    </div>\n                    <div className=\"login-form__container\">\n                    {!localStorage.username?\n                        <Link to={\"/login\"}>\n                        <Button \n                            onClick={this.handleClick} \n                            variant=\"secondary\"\n                            className=\"homepage-button__slbtn\"\n                            >\n                            Login/SignUp\n                            </Button>\n                        </Link>\n                        :\n                        <Link to={\"/\"} onClick={this.logout}>\n                            <Button \n                                onClick={this.handleClick} \n                                variant=\"secondary\"\n                                className=\"homepage-button__slbtn\"\n                                >\n                                Logout\n                                </Button>\n                        </Link>\n                    }\n                        \n                    </div>\n                   \n                </header>\n\n                <div className=\"posts-container__wrapper\">\n                <ul className=\"post-list__item\">\n\n                    {this.state.posts.map(post=>{\n                        return <li className=\"post-item\">\n                            <div className=\"post-item__sender\">\n                                {post.username}\n                            </div>\n                            <div className=\"post-item__container\">\n                                <div className=\"post-item__content\">\n                                    {post.content}\n                                </div> \n                            <div className=\"post-item__options\">\n                                {localStorage.username?\n                                    <Button \n                                    className=\"edit-post__btn\"\n                                    variant=\"secondary\"\n                                    onClick={(e)=>{this.editMessage(post.id)}}>edit</Button>\n                                :\n                                null\n                                }\n                                </div>\n                            </div>\n                        </li> \n                    })}\n                </ul>\n                </div>\n\n                {localStorage.username\n                ?\n                     <div className=\"chat-box__area\">\n                     <textarea\n                     className=\"mesage-field__input\"\n                     value={this.state.messageContent}\n                     placeholder=\"enter a message\"\n                     onChange={this.handlChnage}\n                     draggable=\"false\"\n                     >\n                     </textarea>\n                 <div className=\"send-message__button\"\n                      onClick={this.addPost}\n                 >  \n                     send\n                 </div>\n                 </div>\n                 :null \n                }\n               \n                </Container>\n            </div>\n\n        );\n    }\n\n\n}\n\n\nexport default HomePage;"]},"metadata":{},"sourceType":"module"}